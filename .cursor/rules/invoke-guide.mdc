---
description: invoke guide
globs: 
alwaysApply: false
---
# 起動ガイド

サーバーやCLIを実行する場合のガイド。

## あなたは停止しない
あなた（AI）が停止しないよう、サーバーやCLIが終了しない可能性のある場合は以下のいずれかの方法で実行する。
- **{{タイムアウトを設定}}する** 停止するはずのCLIについては、必ずタイムアウトを設定して、必ず停止させる。
- **{{バックグラウンドで実行}}させる** サーバーなど常時起動させる目的のCLIは、バックグラウンドで起動させ、ログをファイルに記録して確認する。
- **ユーザー入力禁止** ユーザー入力待ちになると永遠に停止する。ユーザー入力は禁止しろ。

ただし、CLIの終了を待つ必要がある場合もあるので、ケースバイケースで採用すること。CLIの停止を待つべきか判断が曖昧な場合は必ずユーザーに確認する。

## 定義
- name: タイムアウトを設定
  description: 一定時間が経過したら、自動で終了する仕組み。停止しない可能性のある多くのCLIに、タイムアウト機能が実装されている。
  example:
```bash
npx vitest ... --testTimeout 30000
npx playwright test テストファイル.spe.ts --timeout=30000 --reporter=line
gtimeout 10s curl ...
```


- name: バックグラウンドで実行
  description: CLIの実行方法のひとつ。CLIが停止しなくても、フォアグラウンドが継続的に利用可能になる。標準出力、標準エラー出力をファイルに出力させて、ログを確認する。
  example:
```bash
npm run dev > /tmp/server.log 2>&1 &
```
